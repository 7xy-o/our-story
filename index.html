<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <style>
        /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¹Ø§Ù…Ø© === */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffe6e9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            text-align: center;
        }

        /* === Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¬Ø°Ø±ÙŠ) === */
        #loader {
            position: fixed;
            inset: 0; /* ÙŠØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† ÙƒÙ„ Ø§Ù„Ø¬Ù‡Ø§Øª */
            background-color: #ffe6e9;
            z-index: 999999; /* Ø±Ù‚Ù… ÙÙ„ÙƒÙŠ Ù„ÙŠÙƒÙˆÙ† ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        .heart-loader {
            font-size: 120px; /* Ø­Ø¬Ù… Ø¹Ù…Ù„Ø§Ù‚ Ù„Ù„Ù‚Ù„Ø¨ */
            margin-bottom: 20px;
            animation: pulse 0.8s infinite alternate;
            line-height: 1; /* Ù„Ù…Ù†Ø¹ Ù‚Øµ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        }

        .loader-text {
            font-size: 24px;
            color: #d32f2f;
            font-weight: bold;
            letter-spacing: 2px;
            margin-top: 10px;
        }

        /* ÙƒÙ„Ø§Ø³ Ø§Ù„Ø¥Ø®ÙØ§Ø¡ */
        .loader-hidden {
            opacity: 0;
            visibility: hidden;
        }

        /* === ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© === */
        .container {
            position: relative;
            z-index: 10;
        }

        .gif-container img {
            width: 320px;
            max-width: 85%;
            height: auto;
            margin-bottom: 20px;
            filter: drop-shadow(0 10px 15px rgba(211, 47, 47, 0.2));
            animation: floatAnimation 3s ease-in-out infinite;
        }

        h1 {
            color: #d32f2f;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #yesBtn { background-color: #4CAF50; color: white; }
        #noBtn { background-color: #ff5252; color: white; }

        #igBtn {
            display: none;
            background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d);
            color: white;
            margin-top: 20px;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .heart {
            display: none;
            font-size: 100px;
            color: #ff1744;
            animation: pulse 1s infinite;
            margin-top: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        @keyframes floatAnimation {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="heart-loader">â¤ï¸</div>
        <div class="loader-text">Loading love...</div>
    </div>
<canvas id="fireworks"></canvas>
    
    <audio id="bgMusic" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <div class="gif-container">
            <img id="mainImage" src="fox-wait.webp" alt="Cute Fox">
        </div>

        <h1 id="question">Will you be my Valentine?</h1>
        <div id="heartIcon" class="heart">â¤ï¸</div>

        <div class="buttons">
            <button id="yesBtn" onclick="acceptLove()">Yes</button>
            <button id="noBtn" onclick="rejectLove()">No</button>
        </div>

        <a id="igBtn" href="#" target="_blank">Tell Him on Instagram ğŸ’¬</a>
    </div>

    <script>
        // ==========================================
        const instagramUsername = "7xy.o"; // Ø¶Ø¹ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§
        // ==========================================

        const loader = document.getElementById("loader");
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const question = document.getElementById('question');
        const mainImage = document.getElementById('mainImage');
        const igBtn = document.getElementById('igBtn');
        const heartIcon = document.getElementById('heartIcon');
        const audio = document.getElementById('bgMusic');

        let yesScale = 1;
        let noClickCount = 0;

        // === ÙƒÙˆØ¯ Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ ===
        function removeLoader() {
            loader.classList.add("loader-hidden");
            setTimeout(() => { loader.style.display = "none"; }, 500);
        }

        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener("load", removeLoader);

        // Ø®Ø·Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: Ø¥Ø®ÙØ§Ø¡ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†Ù (Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø¹Ø¯Ù… Ø§Ù„Ø§Ø®ØªÙØ§Ø¡)
        setTimeout(removeLoader, 4000);

        // === Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ ===
        const rejectTexts = [
            "Are you sure?", "Really sure?", "Think again!", "Look at him crying!", 
            "You're breaking his heart!", "Don't be cruel!", "Please?", 
            "Pretty please?", "I'm dying here!", "Have mercy!"
        ];

        // ØªØ£ÙƒØ¯ Ø£Ù† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ ØªØ·Ø§Ø¨Ù‚ Ù…Ù„ÙØ§ØªÙƒ
        const sadImages = [
            "fox-sad-1.webp",
            "fox-sad-2.webp",
            "fox-sad-3.webp",
            "fox-sad-4.webp",
            "fox-sad-5.webp"
        ];

        const otherImages = {
            default: "fox-wait.webp",
            happy: "fox-happy.webp"
        };

        function rejectLove() {
            noClickCount++;
            yesScale += 0.4;
            yesBtn.style.transform = `scale(${yesScale})`;
            
            let textIndex = Math.min(noClickCount, rejectTexts.length - 1);
            noBtn.innerText = rejectTexts[textIndex];

            let sadIndex = Math.min(noClickCount - 1, sadImages.length - 1);
            mainImage.src = sadImages[sadIndex];

            if(audio) audio.play().catch(e => console.log("Audio needs interaction"));
        }

function acceptLove() {
            question.innerText = "Yay! I knew it! â¤ï¸";
            mainImage.src = otherImages.happy;
            yesBtn.style.display = 'none';
            noBtn.style.display = 'none';
            heartIcon.style.display = 'block';
            igBtn.style.display = 'block';
            igBtn.href =` https://ig.me/m/${instagramUsername}`;

            // === ğŸš€ ÙƒÙˆØ¯ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ø±ÙŠØ±Ø© (AWS) ===
            // âš ï¸ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API Gateway Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§ Ø¨ÙŠÙ† Ø¹Ù„Ø§Ù…ØªÙŠ Ø§Ù„ØªÙ†ØµÙŠØµ
            const awsApiUrl = "https://6zru4vzms9.execute-api.eu-north-1.amazonaws.com/default/ValentineBackend"; 
            
            fetch(awsApiUrl, {
                method: "POST",
                body: JSON.stringify({ action: "accepted" })
            })
            .then(response => console.log("AWS Signal Sent! ğŸ˜ˆ"))
            .catch(error => console.error("Error sending signal:", error));
            // ===================================

            startFireworks();
            if(audio) audio.play();
        }

        function startFireworks() {
            const canvas = document.getElementById('fireworks');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            
            function createParticle(x, y) {
                const particle = {x: x, y: y,
                    speed: Math.random() * 5 + 2,
                    angle: Math.random() * Math.PI * 2,
                    color:`hsl(${Math.random() * 360}, 100%, 50%)`,
                    size: Math.random() * 5 + 2,
                    life: 100
                };
                particles.push(particle);
            }

            function updateParticles() {
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    p.x += Math.cos(p.angle) * p.speed;
                    p.y += Math.sin(p.angle) * p.speed;
                    p.life--;
                    p.size *= 0.95;
                    if (p.life <= 0) {
                        particles.splice(i, 1);
                        i--;
                    }
                }
            }

            function drawParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            function loop() {
                if (Math.random() < 0.1) {
                    for(let i=0; i<30; i++) {
                        createParticle(Math.random() * canvas.width, Math.random() * canvas.height / 2);
                    }
                }
                updateParticles();
                drawParticles();
                requestAnimationFrame(loop);
            }
            loop();
        }
    </script>
</body>
</html>